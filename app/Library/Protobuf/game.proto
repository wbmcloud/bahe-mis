syntax = "proto3";
package app.library.protobuf;

message InnerMeta {
    INNER_TYPE type_t = 1;
    bytes stuff = 2;
}

/////////////////////////////////////////////////////
//服务器之间通用协议类型
/////////////////////////////////////////////////////
enum INNER_TYPE {
    INNER_TYPE_BEGIN = 0; //开始协议
    INNER_TYPE_REGISTER = 1; //注册服务器
    INNER_TYPE_COMMAND = 2; //GMT指令
    INNER_TYPE_OPEN_ROOM = 3; //代开房间
    INNER_TYPE_COUNT = 100; //协议最大数量
}

//操作类型
enum COMMAND_TYPE {
    COMMAND_TYPE_BEGIN = 0;
    COMMAND_TYPE_RECHARGE = 1; //充值钻石
    COMMAND_TYPE_ROOM_CARD = 2; //房卡
    COMMAND_TYPE_HUANLEDOU = 3; //欢乐豆
}

enum COMMAND_ERROR_CODE {
    COMMAND_ERROR_CODE_SUCCESS = 0; //成功
    COMMAND_ERROR_CODE_NO_PERMISSION = 1; //没有权限
    COMMAND_ERROR_CODE_PARA = 2; //参数错误
    COMMAND_ERROR_CODE_NO_ACCOUNT = 3; //没有账号数据
    COMMAND_ERROR_CODE_NO_PLAYER = 4; //没有玩家数据(即账号存在，但账号下无该角色数据)
    COMMAND_ERROR_CODE_PLAYER_ONLINE = 5; //玩家在线
    COMMAND_ERROR_CODE_PLAYER_OFFLINE = 6; //玩家离线
    COMMAND_ERROR_CODE_ITEM_NOT_FOUND = 7; //物品未能找到
    COMMAND_ERROR_CODE_SERVER_NOT_FOUND = 8; //未能找到服务器
    COMMAND_ERROR_CODE_ASSET_NOT_FOUND = 9; //未能找到相关数据，由于策划配置造成
}

enum SERVER_TYPE {
    SERVER_TYPE_BEGIN = 0;
    SERVER_TYPE_GMT = 1; //GMT服务器
    SERVER_TYPE_GAME = 2; //游戏服务器
}

//注册服务器
message Register {
    INNER_TYPE type_t = 1;
    SERVER_TYPE server_type = 2; //服务器类型
    int64 server_id = 3; //服务器ID
}

//GMT指令
message Command {
    INNER_TYPE type_t = 1;
    COMMAND_TYPE command_type = 2; //操作类型
    COMMAND_ERROR_CODE error_code = 3; //返回码

    bytes account = 4; //账号
    int64 player_id = 5; //玩家角色ID
    int64 item_id = 6; //如果是物品，物品ID(房卡是特殊物品)
    int32 count = 7; //数量(根据COMMAND_TYPE有不同的意义)
}

//代开房间
message OpenRoom {
	INNER_TYPE type_t = 1;
	COMMAND_ERROR_CODE error_code = 2; //返回码
	int64 server_id = 3; //游戏服务器ID
	int64 room_id = 4; //房间ID，如果非0则证明开放成功
	bytes options = 5; //房间设置
}

//额外番型
enum ROOM_EXTEND_TYPE {
    ROOM_EXTEND_TYPE_NULL = 0; //初始值
    ROOM_EXTEND_TYPE_ZHANLIHU = 1; //站立胡
    ROOM_EXTEND_TYPE_JIAHU = 2; //夹胡
    ROOM_EXTEND_TYPE_XUANFENGGANG = 3; //旋风杠
    ROOM_EXTEND_TYPE_BAOPAI = 4; //宝牌
    ROOM_EXTEND_TYPE_DUANMEN = 5; //可断门
    ROOM_EXTEND_TYPE_QIYISE = 6; //清一色
    ROOM_EXTEND_TYPE_BAOSANJIA = 7; //点炮包三家
}

//模式选择-服务器尚无用途
enum ROOM_MODEL_TYPE {
    ROOM_MODEL_TYPE_UNKNOWN = 0; //未知
    ROOM_MODEL_TYPE_CLASSICAL = 1; //经典模式
    ROOM_MODEL_TYPE_MULTIPLE = 2; //高番模式
}

//房间设置-番型选择
message RoomOptions {
    ROOM_MODEL_TYPE model = 1; //模式选择
    int32 extend_type_count = 2; //番型数量
    repeated ROOM_EXTEND_TYPE extend_type = 3; //额外番型
    int32 top_mutiple = 4; //封顶番数
    int32 open_rands = 5; //局数
    bool voice_open = 6; //实时语音
}